## 设计目标

设计一个登录认证和授权系统的demo，提供用户和角色的增删改查相关API  
不需要数据库设计，所有的用户权限数据信息都在内存中  
涉及的接口  
+ 用户的创建和删除  
+ 角色的创建和删除  
+ 给用户授予指定的角色  
+ 用户的登录和登出  
+ 验证用户是否拥有某个角色  
+ 展示用户的所有角色  


## 数据设计  
系统的主要实体有两个，用户和角色  
对应关系是多对多的，一个用户可能有多个角色，反过来也是如此  
因为不存储到数据库层面，所以计划将数据暂存于内存的Map中


1. 用户实体User

| 字段名 | 类型 | 说明 |  
| ------ | ------ | ------ |  
| name | String | **用户名（登录名），key** |  
| id | Long | 用户id |  
| password | String | 密码（加密形式） |  
| lastAuthTime | Date | 上次授权时间 |  
| token | String | 状态授权令牌 |  
| updateTime | Date | 更新时间 |  

+ 用户实体存储在userMap中，key为name角色名，value为User这个对象实例  
+ 需要有一个atomicLong当做自增序列对象来给新增用户授予ID  
+ 如果后续需要持久化，可以用id字段作为主键  


2. 角色实体Role

| 字段名 | 类型 | 说明 |  
| ------ | ------ | ------ |  
| name | String | **角色名，key** |  
| id | Long | 角色ID |  
| updateTime | Date | 更新时间 |  

+ 角色实体存储在roleMap中，key为name角色名，value为Role这个对象实例  
+ 需要有一个atomicLong当做自增序列对象来给新增用户授予ID  
+ 如果后续需要持久化，可以用id字段作为主键  

3. 用户-角色之间的关系  
+ 角色和用户之间是多对多的关系，因此需要有两个map来维护这层关系。

| 容器名 | 类型 | 说明 |  
| ------ | ------ | ------ |  
| userRoleMap | Map<String, Set<Long>> | 该用户共有哪些角色ID，key--用户名，value--角色集合 |  
| roleUserMap | Map<String, Set<Long>> | 该角色下有哪些用户ID，key--角色名，value--用户集合 |  

+ 补充：可以考虑延迟加载



## 接口设计




## 调用逻辑设计  



## 测试场景
1. 添加用户->用户登录->
2. 角色的添加和删除
3. 
